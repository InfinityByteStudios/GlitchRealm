<nav class="nav">
    <div class="nav-container">
    <a href="/index.html" class="logo">
            <span class="glitch" data-text="GlitchRealm">GlitchRealm</span>
            <span class="games-text">Games</span>
        </a>
        
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle mobile menu">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
        </button>
        
        <div class="nav-links" id="nav-links">
            <a href="/index.html" class="nav-link">Home</a>
            <a href="/games.html" class="nav-link">Games</a>
            <a href="/about.html" class="nav-link" title="About GlitchRealm Games - Learn about our indie gaming platform">About</a>
            <a href="/contact.html" class="nav-link">Contact</a>
            <a href="/support.html" class="nav-link" id="support-nav-link">Support</a>
            <div class="nav-dropdown">
                <button class="nav-link dropdown-trigger" type="button">More <span class="nav-dropdown-arrow">▼</span></button>
                <div class="nav-dropdown-menu">
                    <a href="/community.html" class="nav-dropdown-link">Community</a>
                    <a href="/projects.html" class="nav-dropdown-link">Our Projects</a>
                    <a href="/user-portal.html" class="nav-dropdown-link">User Portal</a>
                </div>
            </div>
            <button id="sign-in-btn" class="btn btn-primary nav-signin">Sign In</button>
            <div id="user-profile" class="user-profile" style="display: none;">
                <div class="profile-dropdown">
                    <button class="profile-trigger">
                        <span id="notification-count-badge" class="notification-count-badge" style="display: none;">0</span>
                        <div class="user-avatar-container">
                            <img id="user-avatar" class="user-avatar" src="" alt="Profile" />
                            <div class="avatar-upload-overlay">
                                <span class="upload-icon">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z M12,12L16,16H13.5V19H10.5V16H8L12,12Z"/>
                                    </svg>
                                </span>
                            </div>
                        </div>
                        <span id="user-name" class="user-name"></span>
                        <span class="dropdown-arrow">▼</span>
                    </button>
                    <div class="profile-menu">
                        <div class="profile-info">
                            <div class="user-avatar-large-container">
                                <img id="user-avatar-large" class="user-avatar-large" src="" alt="Profile" />
                                <div class="avatar-upload-overlay-large">
                                    <span class="upload-icon-large">
                                        <svg viewBox="0 0 24 24">
                                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z M12,12L16,16H13.5V19H10.5V16H8L12,12Z"/>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                            <div class="profile-details">
                                <span id="user-display-name" class="user-display-name"></span>
                                <span id="user-email" class="user-email"></span>
                                <span id="user-provider" class="user-provider"></span>
                            </div>
                        </div>
                        <div class="profile-actions">
                            <button id="user-portal-btn" class="profile-action-btn user-portal">
                                <span class="action-icon">
                                    <svg class="icon-svg" viewBox="0 0 24 24">
                                        <path d="M12,2A10,10 0 1,0 22,12A10,10 0 0,0 12,2M11,17V13H7V11H11V7H13V11H17V13H13V17H11Z"/>
                                    </svg>
                                </span>
                                User Portal
                            </button>
                            <button id="notification-bell" class="profile-action-btn notification-bell" title="Notifications">
                                <span class="action-icon">
                                    <svg class="icon-svg bell-icon" viewBox="0 0 24 24">
                                        <path d="M12,2A2,2 0 0,1 14,4C14,4.74 13.6,5.39 13,5.73V7A7,7 0 0,1 20,14V16A1,1 0 0,0 21,17H22V19H2V17H3A1,1 0 0,0 4,16V14A7,7 0 0,1 11,7V5.73C10.4,5.39 10,4.74 10,4A2,2 0 0,1 12,2M9,21A3,3 0 0,0 12,24A3,3 0 0,0 15,21H9Z"/>
                                    </svg>
                                </span>
                                Notifications
                                <span id="notification-count" class="notification-count" style="display: none;">0</span>
                            </button>
                            <button id="refresh-profile-btn" class="profile-action-btn refresh-profile">
                                <span class="action-icon">
                                    <svg class="icon-svg" viewBox="0 0 24 24">
                                        <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                                    </svg>
                                </span>
                                Refresh Profile
                            </button>
                            <button id="settings-btn" class="profile-action-btn settings">
                                <span class="action-icon">
                                    <svg class="icon-svg" viewBox="0 0 24 24">
                                        <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                                    </svg>
                                </span>
                                Settings
                            </button>
                            <button id="moderation-menu-btn" class="profile-action-btn moderation" style="display:none;">
                                <span class="action-icon">
                                    <svg class="icon-svg" viewBox="0 0 24 24">
                                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 2.18l7 3.11V11c0 4.39-2.88 8.53-7 9.86C7.88 19.53 5 15.39 5 11V6.29l7-3.11zM12 7a2 2 0 00-2 2v3a2 2 0 004 0V9a2 2 0 00-2-2z"/>
                                    </svg>
                                </span>
                                Moderation
                            </button>
                            <button id="sign-out-btn" class="profile-action-btn sign-out">
                                <span class="action-icon">
                                    <svg class="icon-svg" viewBox="0 0 24 24">
                                        <path d="M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.59L17 17L22 12L17 7M4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z"/>
                                    </svg>
                                </span>
                                Sign Out
                            </button>
                            <button id="delete-account-btn" class="profile-action-btn delete-account">
                                <span class="action-icon">
                                    <svg class="icon-svg" viewBox="0 0 24 24">
                                        <path d="M9 3V4H4V6H5V19C5 20.1 5.9 21 7 21H17C18.1 21 19 20.1 19 19V6H20V4H15V3H9ZM7 6H17V19H7V6ZM9 8V17H11V8H9ZM13 8V17H15V8H13Z"/>
                                    </svg>
                                </span>
                                Delete Account
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!-- Hidden file input for profile picture upload -->
<input type="file" id="profile-picture-upload" accept="image/*" style="display: none;">
</nav><!-- Terms Updated Popup (site-wide) - moved outside nav so it can cover the full viewport -->
<div id="terms-update-popup" class="terms-popup-overlay" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="terms-update-title">
    <div class="terms-popup" role="document">
        <div class="terms-popup-header">
            <h3 id="terms-update-title" class="terms-popup-title">
                <span class="glitch-small" data-text="TERMS UPDATED">TERMS UPDATED</span>
            </h3>
        </div>
        <div class="terms-popup-content">
            <p>
                We have updated our 
                <a href="/terms-of-service.html" class="popup-inline-link">Terms of Service</a>
                and 
                <a href="/privacy-policy.html" class="popup-inline-link">Privacy Policy</a>.
                Please review the changes.
            </p>
        </div>
        <div class="terms-popup-actions">
            <button id="accept-terms-update" class="btn btn-primary" type="button">Accept</button>
            <a id="dismiss-terms-update" href="about:blank" class="btn btn-secondary" role="button">Dismiss</a>
        </div>
    </div>
    <span class="sr-only">Press Escape to dismiss</span>
</div>

<!-- Profile Picture Crop Modal -->
<div id="crop-modal" class="crop-modal" style="display: none;">
    <div class="crop-modal-content">
        <div class="crop-modal-header">
            <h3>Crop Profile Picture</h3>
            <button class="crop-modal-close" id="crop-modal-close">&times;</button>
        </div>
        <div class="crop-container">
            <div class="crop-preview-container">
                <img id="crop-image" class="crop-image" src="" alt="Crop Preview">
                <div class="crop-overlay">
                    <div class="crop-circle"></div>
                </div>
            </div>
        </div>
        <div class="crop-controls">
            <div class="zoom-control">
                <label>Zoom:</label>
                <input type="range" id="zoom-slider" min="1" max="3" step="0.1" value="1">
            </div>
            <div class="crop-actions">
                <button id="crop-cancel" class="crop-btn crop-cancel">Cancel</button>
                <button id="crop-confirm" class="crop-btn crop-confirm">Apply</button>
            </div>
        </div>
    </div>
</div>

<!-- Sign In Modal (site-wide) -->
<div id="signin-modal" class="auth-overlay" style="display: none;">
    <div class="auth-panel">
        <div class="auth-header">
            <div class="auth-logo">
                <span class="glitch" data-text="GLITCHREALM ACCESS">GLITCHREALM ACCESS</span>
            </div>
            <button class="auth-close" id="close-modal">
                <span class="close-icon">×</span>
            </button>
        </div>

        <div class="auth-tabs">
            <button class="auth-tab active" data-tab="signin">
                <span class="tab-icon">
                    <svg class="icon-svg" viewBox="0 0 24 24">
                        <path d="M10,17V14H3V10H10V7L15,12L10,17M10,2H19A2,2 0 0,1 21,4V20A2,2 0 0,1 19,22H10A2,2 0 0,1 8,20V18H10V20H19V4H10V6H8V4A2,2 0 0,1 10,2Z"/>
                    </svg>
                </span>
                <span>SIGN IN</span>
            </button>
            <button class="auth-tab" data-tab="signup">
                <span class="tab-icon">
                    <svg class="icon-svg" viewBox="0 0 24 24">
                        <path d="M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M6,10V7H4V10H1V12H4V15H6V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z"/>
                    </svg>
                </span>
                <span>SIGN UP</span>
            </button>
        </div>

        <div class="auth-content">
            <!-- Sign In Form -->
            <div class="auth-form-container active" id="signin-form">
                <div class="form-title">
                    <span class="glitch-small" data-text="AUTHENTICATE">AUTHENTICATE</span>
                </div>
                <form id="email-signin-form" class="neural-form">
                    <div class="input-container">
                        <div class="input-label">Email/Username</div>
                        <input type="email" id="signin-email" class="neural-input" required>
                        <div class="input-line"></div>
                    </div>

                    <div class="input-container">
                        <div class="input-label">Password</div>
                        <input type="password" id="signin-password" class="neural-input" required>
                        <div class="input-line"></div>
                    </div>

                    <button type="submit" class="neural-button primary">
                        <span class="button-text">INITIATE CONNECTION</span>
                        <div class="button-glow"></div>
                    </button>
                    <button type="button" class="forgot-link">
                        <span>Forgot Password?</span>
                    </button>
                </form>
            </div>

            <!-- Sign Up Form -->
            <div class="auth-form-container" id="signup-form">
                <div class="form-title">
                    <span class="glitch-small" data-text="INITIALIZE">INITIALIZE</span>
                </div>
                <form id="email-signup-form" class="neural-form">
                    <div class="input-container">
                        <div class="input-label">Email</div>
                        <input type="email" id="signup-email" class="neural-input" required>
                        <div class="input-line"></div>
                    </div>

                    <div class="input-container">
                        <div class="input-label">Password</div>
                        <input type="password" id="signup-password" class="neural-input" required>
                        <div class="input-line"></div>
                    </div>

                    <div class="input-container">
                        <div class="input-label">Confirm Password</div>
                        <input type="password" id="confirm-password" class="neural-input" required>
                        <div class="input-line"></div>
                    </div>

                    <button type="submit" class="neural-button primary">
                        <span class="button-text">CREATE ACCOUNT</span>
                        <div class="button-glow"></div>
                    </button>
                </form>
            </div>

            <!-- Divider -->
            <div class="auth-divider">
                <div class="divider-line"></div>
                <span class="divider-text">ALTERNATIVE ACCESS</span>
                <div class="divider-line"></div>
            </div>

            <!-- Social Login -->
            <div class="social-auth">
                <button id="google-signin" class="social-button google">
                    <img src="https://fonts.gstatic.com/s/i/productlogos/googleg/v6/24px.svg" alt="Google" class="social-icon" loading="lazy" decoding="async" width="24" height="24">
                    <span id="google-button-text">Sign in with Google</span>
                    <div class="social-glow"></div>
                </button>

                <button id="github-signin" class="social-button github">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg" alt="GitHub" class="social-icon" loading="lazy" decoding="async" width="24" height="24">
                    <span id="github-button-text">Sign in with GitHub</span>
                    <div class="social-glow"></div>
                </button>

                <button id="anonymous-signin" class="social-button guest">
                    <img src="https://cdn.jsdelivr.net/gh/feathericons/feather/icons/user.svg" alt="Anonymous" class="social-icon" loading="lazy" decoding="async" width="24" height="24">
                    <span>ANONYMOUS MODE</span>
                    <div class="social-glow"></div>
                </button>
            </div>

            <!-- Terms Agreement -->
            <div class="terms-agreement">
                <p>By signing in / signing up you agree to our <a href="/terms-of-service.html" target="_blank">Terms of Service</a> and <a href="/privacy-policy.html" target="_blank">Privacy Policy</a>.</p>
            </div>
        </div>

        <!-- Background Effects -->
        <div class="auth-bg-effect"></div>
        <div class="auth-scanlines"></div>
    </div>
    </div>
